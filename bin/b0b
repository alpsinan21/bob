#! /bin/sh

. b0b.cfg

echo "Checking B0b's health."
vars=( "$B0B_HOME" "$APP_NAME" "$APP_VERSION" )
names=( "B0B_HOME" "APP_NAME" "APP_VERSION" )
for (( i = 0 ; i < ${#vars[@]} ; i++ ))
do
    if [[ -z "${vars[$i]}" ]]; then
        echo >&2 "Error: ${names[$i]} has not been set"
        exit 1
    fi
done

make -f $B0B_HOME/Makefile \
    APP_NAME="$APP_NAME" \
    APP_VERSION="$APP_VERSION" \
    APP_DIR=`pwd` \
    DEPLOY_HOST="$DEPLOY_HOST" \
    DEPLOY_PORT="$DEPLOY_PORT" \
    DEPLOY_DIR="$DEPLOY_DIR" \
    $1 $2 $3 $4 $5 $6 $7 $8 $9
